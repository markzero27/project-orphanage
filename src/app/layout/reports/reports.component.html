<div class="top">
  <h2 class="">
    <small>Reports </small>
  </h2>
</div>
<ul class="nav nav-tabs">
  <li class="nav-item" (click)="selectedType = 'accomplishments'">
    <a
      class="nav-link"
      [ngClass]="{ active: selectedType == 'accomplishments' }"
      >Accomplishments</a
    >
  </li>

  <li class="nav-item" (click)="selectedType = 'monitoring'">
    <a class="nav-link" [ngClass]="{ active: selectedType == 'monitoring' }">
      Guest Monitoring
    </a>
  </li>
  <li class="nav-item" (click)="selectedType = 'inventory'">
    <a class="nav-link" [ngClass]="{ active: selectedType == 'inventory' }">
      Medicine Inventory Reports
    </a>
  </li>
</ul>

<div [ngSwitch]="selectedType">
  <!-- Accomplishments -->
  <div class=" mb-3 py-3" *ngSwitchCase="'accomplishments'">
    <div class="mb-3">
      <button class="btn btn-success float-right mr-1">
        Export as PDF
      </button>
      <button
        class="btn btn-light float-right"
        *ngIf="userRole != 0"
        (click)="open(content)"
      >
        <i class="fa fa-plus" aria-hidden="true"></i>
      </button>
      <button class="btn btn-light float-right">
        <i class="fa fa-filter" aria-hidden="true"></i>
      </button>
      <button class="btn btn-light float-right">
        <i class="fa fa-archive" aria-hidden="true"></i>
      </button>
    </div>
    <table class="table table-striped">
      <thead class="bg-primary-color text-light">
        <tr>
          <th><input type="checkbox" /></th>
          <th>#</th>
          <th>Task</th>
          <th>Problems Encountered</th>
          <th>Remarks</th>
          <th>Time-in</th>
          <th>Time-out</th>
          <th>Date</th>
          <th>Submitted By</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let acc of accList; let i = index">
          <th><input type="checkbox" /></th>
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ acc.task_description }}</td>
          <td>{{ acc.problems_encountered }}</td>
          <td>{{ acc.remarks }}</td>
          <td>{{ formatTime(acc.time_in) | date: 'hh:mm a' }}</td>
          <td>{{ formatTime(acc.time_out) | date: 'hh:mm a' }}</td>
          <td>{{ acc.updated_at }}</td>
          <td>{{ acc.submitted_by[1] }}</td>
        </tr>
        <tr *ngIf="accList.length == 0">
          <td class="text-center p-3" colspan="13">No Record</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Add Accomplishments -->

  <div>
    <ng-template #content let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h5 class="modal-title text-center">Add Accomplishments</h5>
        <button
          type="button"
          class="close"
          aria-label="Close"
          (click)="c('Cross click')"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <fieldset class="form-group">
          <div class="d-flex justify-content-between ">
            <div class="text-center px-3 border-right">
              Time In
              <ngb-timepicker
                [(ngModel)]="time_in"
                [meridian]="true"
              ></ngb-timepicker>
            </div>
            <div class="text-center px-3">
              Time out
              <ngb-timepicker
                [(ngModel)]="time_out"
                [meridian]="true"
              ></ngb-timepicker>
            </div>
          </div>
        </fieldset>
        <hr />
        <fieldset class="form-group">
          <label>Task</label>
          <input
            class="form-control"
            placeholder=""
            [(ngModel)]="accomp.task_description"
          />
        </fieldset>
        <fieldset class="form-group">
          <label>Problems Encountered</label>
          <input
            class="form-control"
            placeholder=""
            [(ngModel)]="accomp.problems_encountered"
          />
        </fieldset>
        <fieldset class="form-group">
          <label>Remarks</label>
          <input
            class="form-control"
            placeholder=""
            type="text"
            [(ngModel)]="accomp.remarks"
          />
        </fieldset>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="c('Close click')"
        >
          Close
        </button>
        <button
          type="button"
          class="btn btn-primary"
          (click)="addAccomplishment()"
        >
          Add
        </button>
      </div>
    </ng-template>
  </div>

  <!-- Inventory -->
  <div class=" mb-3 py-3" *ngSwitchCase="'inventory'">
    <div class="mb-3">
      <button class="btn btn-success float-right mr-1">
        Export as PDF
      </button>
      <button class="btn btn-light float-right">
        <i class="fa fa-filter" aria-hidden="true"></i>
      </button>
      <button class="btn btn-light float-right">
        <i class="fa fa-archive" aria-hidden="true"></i>
      </button>
    </div>
    <table class="table table-striped">
      <thead class="bg-primary-color text-light">
        <tr>
          <th><input type="checkbox" /></th>
          <th>#</th>
          <th>Medicine Name</th>
          <th>Medicine Type</th>
          <th>Action</th>
          <th>Quantity</th>
          <th>Remaining Stock</th>
          <th>Created By</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let med of medReports">
          <td><input type="checkbox" /></td>
          <td>#</td>
          <td>{{ med.medicine_name }}</td>
          <td>{{ med.medicine_type }}</td>
          <td>{{ med.action }}</td>
          <td>{{ med.quantity }}</td>
          <td>{{ med.remaining_stock }}</td>
          <td>{{ med.staff[1] }}</td>
          <td>{{ med.updated_at }}</td>
        </tr>

        <tr *ngIf="medReports.length == 0">
          <td class="text-center p-3" colspan="13">No Record</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Monitoring -->
  <div class=" mb-3 py-3" *ngSwitchCase="'monitoring'">
    <div class="mb-3">
      <button class="btn btn-success float-right mr-1">
        Export as PDF
      </button>
      <button class="btn btn-light float-right">
        <i class="fa fa-filter" aria-hidden="true"></i>
      </button>
      <button class="btn btn-light float-right">
        <i class="fa fa-archive" aria-hidden="true"></i>
      </button>
    </div>
    <table class="table table-striped">
      <thead class="bg-primary-color text-light">
        <tr>
          <th><input type="checkbox" /></th>
          <th>#</th>
          <th>Guest Name</th>
          <th>Contact #</th>
          <th>Address</th>
          <th>Relationship</th>
          <th>Elders Visited</th>
          <th>Time-in</th>
          <th>Time-out</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let guest of guestList; let i = index">
          <th><input type="checkbox" /></th>
          <th scope="row">{{ i + 1 }}</th>
          <td>{{ guest.guest_name }}</td>
          <td>{{ guest.contact_no }}</td>
          <td>{{ guest.address }}</td>
          <td>{{ guest.elder_name }}</td>
          <td>{{ guest.relationship_description }}</td>
          <td>{{ formatTime(guest.time_in) | date: 'hh:mm a' }}</td>
          <td>{{ formatTime(guest.time_out) | date: 'hh:mm a' }}</td>
          <td>{{ guest.created_at }}</td>
        </tr>

        <tr *ngIf="guestList.length == 0">
          <td class="text-center p-3" colspan="13">No Record</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
